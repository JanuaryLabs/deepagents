---
title: Getting Started
description: Install Text2SQL and run your first natural language query
---

This guide walks you through installing Text2SQL and running your first natural language to SQL query.

## Installation

```bash
npm install @deepagents/text2sql
```

## Basic Setup

Text2SQL requires four components:

1. **Adapter** - Connects to your database (PostgreSQL, SQLite, SQL Server, or MySQL/MariaDB)
2. **Grounding** - Configures database introspection (see [Grounding](/docs/text2sql/grounding) for advanced options)
3. **Version** - A string used to manage cache invalidation (bump when schema changes)
4. **History** - Stores conversation history (optional for single queries)

<Tabs groupId="database" items={['SQLite', 'PostgreSQL', 'SQL Server', 'MySQL/MariaDB']}>
<Tab value="SQLite">
```typescript
import { DatabaseSync } from 'node:sqlite';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { Sqlite } from '@deepagents/text2sql/sqlite';
import * as sqlite from '@deepagents/text2sql/sqlite';

// Connect to your database
const db = new DatabaseSync('./your-database.db', { readOnly: true });

// Create the Text2SQL instance
const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new Sqlite({
    execute: (sql) => db.prepare(sql).all(),
    grounding: [sqlite.tables(), sqlite.info()],
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
<Tab value="PostgreSQL">
```typescript
import pg from 'pg';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { Postgres } from '@deepagents/text2sql/postgres';
import * as postgres from '@deepagents/text2sql/postgres';

const pool = new pg.Pool({
  connectionString: process.env.DATABASE_URL,
});

const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new Postgres({
    execute: async (sql) => {
      const result = await pool.query(sql);
      return result.rows;
    },
    grounding: [postgres.tables(), postgres.info()],
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
<Tab value="SQL Server">
```typescript
import sql from 'mssql';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { SqlServer } from '@deepagents/text2sql/sqlserver';
import * as sqlserver from '@deepagents/text2sql/sqlserver';

const pool = await sql.connect({
  server: process.env.DB_HOST,
  database: process.env.DB_NAME,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  options: { encrypt: true, trustServerCertificate: true },
});

const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new SqlServer({
    execute: async (query) => {
      const result = await pool.request().query(query);
      return result.recordset;
    },
    grounding: [sqlserver.tables(), sqlserver.info()],
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
<Tab value="MySQL/MariaDB">
```typescript
import mysql from 'mysql2/promise';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { Mysql } from '@deepagents/text2sql/mysql';
import * as mysqlGrounding from '@deepagents/text2sql/mysql';

const pool = mysql.createPool({
  host: process.env.DB_HOST,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  database: process.env.DB_NAME,
});

const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new Mysql({
    execute: async (sql) => {
      const [rows] = await pool.query(sql);
      return rows;
    },
    grounding: [mysqlGrounding.tables(), mysqlGrounding.info()],
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
</Tabs>

## Your First Query

### Generate SQL Only

Use `toSql()` to generate SQL without executing it:

```typescript
const sql = await text2sql.toSql(
  'Show me the top 10 customers by total purchases',
);

console.log(sql);
// SELECT c.CustomerId, c.FirstName, c.LastName, SUM(i.Total) as TotalPurchases
// FROM Customer c
// JOIN Invoice i ON c.CustomerId = i.CustomerId
// GROUP BY c.CustomerId
// ORDER BY TotalPurchases DESC
// LIMIT 10
```

### Chat with Streaming

Use `chat()` for streaming responses with conversation history:

```typescript
const stream = await text2sql.chat(
  [{ role: 'user', content: 'What are the most popular genres?' }],
  { chatId: 'chat-123', userId: 'user-456' },
);

for await (const chunk of stream) {
  if (chunk.type === 'text-delta') {
    process.stdout.write(chunk.textDelta);
  }
}
```

## Understanding the Response

When Text2SQL processes a query, it:

1. **Runs grounding** - Introspects your database schema (tables, columns, relationships, indexes, constraints)
2. **Applies teachables** - Injects domain knowledge (terms, hints, guardrails, examples) into the prompt
3. **Assembles context** - Builds the agent prompt with schema + teachables + step-back reasoning examples
4. **Generates & validates SQL** - Drafts SQL, validates syntax with `validate_query` tool
5. **Returns results** - `toSql()` returns the SQL string; `chat()` streams the response with explanation

Text2SQL includes default teachables that enforce best practices like read-only queries, row limits, and proper validation workflows.

## Environment Variables

Text2SQL uses Groq for AI inference. Set your API key:

```bash
export GROQ_API_KEY=your-api-key
```

## Next Steps

- [Grounding](/docs/text2sql/grounding) - Configure database introspection for richer context
- [PostgreSQL Adapter](/docs/text2sql/postgresql) - PostgreSQL-specific features
- [SQLite Adapter](/docs/text2sql/sqlite) - SQLite-specific features
- [SQL Server Adapter](/docs/text2sql/sqlserver) - SQL Server-specific features
- [MySQL/MariaDB Adapter](/docs/text2sql/mysql) - MySQL and MariaDB-specific features
- [Generate SQL](/docs/text2sql/generate-sql) - Deep dive into SQL generation
- [Teach the System](/docs/text2sql/teach-the-system) - Add domain knowledge
