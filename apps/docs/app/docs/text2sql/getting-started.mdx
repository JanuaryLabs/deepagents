---
title: Getting Started
description: Install Text2SQL and run your first natural language query
---

This guide walks you through installing Text2SQL and running your first natural language to SQL query.

## Installation

```bash
npm install @deepagents/text2sql
```

## Basic Setup

Text2SQL requires three components:

1. **Adapter** - Connects to your database (PostgreSQL, SQLite, or SQL Server)
2. **Version** - A string used to manage cache invalidation (bump when schema changes)
3. **History** - Stores conversation history (optional for single queries)

<Tabs groupId="database" items={['SQLite', 'PostgreSQL', 'SQL Server']}>
<Tab value="SQLite">
```typescript
import { DatabaseSync } from 'node:sqlite';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { Sqlite } from '@deepagents/text2sql/sqlite';

// Connect to your database
const db = new DatabaseSync('./your-database.db', { readOnly: true });

// Create the Text2SQL instance
const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new Sqlite({
    execute: (sql) => db.prepare(sql).all(),
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
<Tab value="PostgreSQL">
```typescript
import pg from 'pg';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { Postgres } from '@deepagents/text2sql/postgres';

const pool = new pg.Pool({
  connectionString: process.env.DATABASE_URL,
});

const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new Postgres({
    execute: async (sql) => {
      const result = await pool.query(sql);
      return result.rows;
    },
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
<Tab value="SQL Server">
```typescript
import sql from 'mssql';

import { InMemoryHistory, Text2Sql } from '@deepagents/text2sql';
import { SqlServer } from '@deepagents/text2sql/sqlserver';

const pool = await sql.connect({
  server: process.env.DB_HOST,
  database: process.env.DB_NAME,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
  options: { encrypt: true, trustServerCertificate: true },
});

const text2sql = new Text2Sql({
  version: 'v1', // Bump this when your schema changes
  adapter: new SqlServer({
    execute: async (query) => {
      const result = await pool.request().query(query);
      return result.recordset;
    },
  }),
  history: new InMemoryHistory(),
});
```
</Tab>
</Tabs>

## Your First Query

### Generate SQL Only

Use `toSql()` to generate SQL without executing it:

```typescript
const sql = await text2sql.toSql(
  'Show me the top 10 customers by total purchases',
);

console.log(sql);
// SELECT c.CustomerId, c.FirstName, c.LastName, SUM(i.Total) as TotalPurchases
// FROM Customer c
// JOIN Invoice i ON c.CustomerId = i.CustomerId
// GROUP BY c.CustomerId
// ORDER BY TotalPurchases DESC
// LIMIT 10
```

### Chat with Streaming

Use `chat()` for streaming responses with conversation history:

```typescript
const stream = await text2sql.chat(
  [{ role: 'user', content: 'What are the most popular genres?' }],
  { chatId: 'chat-123', userId: 'user-456' },
);

for await (const chunk of stream) {
  if (chunk.type === 'text-delta') {
    process.stdout.write(chunk.textDelta);
  }
}
```

## Understanding the Response

When Text2SQL processes a query, it:

1. **Analyzes your schema** - Examines tables, columns, relationships, and data patterns
2. **Generates a brief** - Creates a business context summary (cached for reuse)
3. **Applies teachables** - Uses domain knowledge (terms, hints, guardrails, examples)
4. **Applies step-back prompting** - Considers the broader question before generating SQL
5. **Validates the query** - Ensures the SQL is syntactically correct using `validate_query` tool
6. **Returns results** - Either raw SQL or executed results

Text2SQL includes default teachables that enforce best practices like read-only queries, row limits, and proper validation workflows.

## Environment Variables

Text2SQL uses Groq for AI inference. Set your API key:

```bash
export GROQ_API_KEY=your-api-key
```

## Next Steps

- [PostgreSQL Adapter](/docs/text2sql/postgresql) - PostgreSQL-specific features
- [SQLite Adapter](/docs/text2sql/sqlite) - SQLite-specific features
- [SQL Server Adapter](/docs/text2sql/sqlserver) - SQL Server-specific features
- [Generate SQL](/docs/text2sql/generate-sql) - Deep dive into SQL generation
- [Teach the System](/docs/text2sql/teach-the-system) - Add domain knowledge
